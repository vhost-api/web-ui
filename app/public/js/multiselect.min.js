/*
 * @license
 *
 * Multiselect v2.3.0
 * http://crlcu.github.io/multiselect/
 *
 * Copyright (c) 2016 Adrian Crisan
 * Licensed under the MIT license (https://github.com/crlcu/multiselect/blob/master/LICENSE)
 */
if("undefined"==typeof jQuery)throw new Error("multiselect requires jQuery");!function(a){"use strict";var b=a.fn.jquery.split(" ")[0].split(".");if(b[0]<2&&b[1]<7)throw new Error("multiselect requires jQuery version 1.7 or higher")}(jQuery),function(a){"function"==typeof define&&define.amd?define(["jquery"],a):a(jQuery)}(function(a){"use strict";var b=function(a){function b(b,c){var d=b.prop("id");this.$left=b,this.$right=a(a(c.right).length?c.right:"#"+d+"_to"),this.actions={$leftAll:a(a(c.leftAll).length?c.leftAll:"#"+d+"_leftAll"),$rightAll:a(a(c.rightAll).length?c.rightAll:"#"+d+"_rightAll"),$leftSelected:a(a(c.leftSelected).length?c.leftSelected:"#"+d+"_leftSelected"),$rightSelected:a(a(c.rightSelected).length?c.rightSelected:"#"+d+"_rightSelected"),$undo:a(a(c.undo).length?c.undo:"#"+d+"_undo"),$redo:a(a(c.redo).length?c.redo:"#"+d+"_redo"),$moveUp:a(a(c.moveUp).length?c.moveUp:"#"+d+"_move_up"),$moveDown:a(a(c.moveDown).length?c.moveDown:"#"+d+"_move_down")},delete c.leftAll,delete c.leftSelected,delete c.right,delete c.rightAll,delete c.rightSelected,delete c.undo,delete c.redo,delete c.moveUp,delete c.moveDown,this.options={keepRenderingSort:c.keepRenderingSort,submitAllLeft:void 0===c.submitAllLeft||c.submitAllLeft,submitAllRight:void 0===c.submitAllRight||c.submitAllRight,search:c.search,ignoreDisabled:void 0!==c.ignoreDisabled&&c.ignoreDisabled},delete c.keepRenderingSort,c.submitAllLeft,c.submitAllRight,c.search,c.ignoreDisabled,this.callbacks=c,this.init()}return b.prototype={init:function(){var b=this;b.undoStack=[],b.redoStack=[],(b.$left.find("optgroup").length||b.$right.find("optgroup").length)&&(b.callbacks.sort=!1,b.options.search=!1),b.options.keepRenderingSort&&(b.skipInitSort=!0,b.callbacks.sort!==!1&&(b.callbacks.sort=function(b,c){return a(b).data("position")>a(c).data("position")?1:-1}),b.$left.find("option").each(function(b,c){a(c).data("position",b)}),b.$right.find("option").each(function(b,c){a(c).data("position",b)})),"function"==typeof b.callbacks.startUp&&b.callbacks.startUp(b.$left,b.$right),b.skipInitSort||"function"!=typeof b.callbacks.sort||(b.$left.mSort(b.callbacks.sort),b.$right.each(function(c,d){a(d).mSort(b.callbacks.sort)})),b.options.search&&b.options.search.left&&(b.options.search.$left=a(b.options.search.left),b.$left.before(b.options.search.$left)),b.options.search&&b.options.search.right&&(b.options.search.$right=a(b.options.search.right),b.$right.before(a(b.options.search.$right))),b.events()},events:function(){var b=this;b.options.search&&b.options.search.$left&&b.options.search.$left.on("keyup",function(a){if(this.value){b.$left.find('option:search("'+this.value+'")').mShow(),b.$left.find('option:not(:search("'+this.value+'"))').mHide()}else b.$left.find("option").mShow()}),b.options.search&&b.options.search.$right&&b.options.search.$right.on("keyup",function(a){if(this.value){b.$right.find('option:search("'+this.value+'")').mShow(),b.$right.find('option:not(:search("'+this.value+'"))').mHide()}else b.$right.find("option").mShow()}),b.$right.closest("form").on("submit",function(a){b.$left.find("option").prop("selected",b.options.submitAllLeft),b.$right.find("option").prop("selected",b.options.submitAllRight)}),b.$left.on("dblclick","option",function(a){a.preventDefault();var c=b.$left.find("option:selected");c.length&&b.moveToRight(c,a)}),b.$left.on("keypress",function(a){if(13===a.keyCode){a.preventDefault();var c=b.$left.find("option:selected");c.length&&b.moveToRight(c,a)}}),b.$right.on("dblclick","option",function(a){a.preventDefault();var c=b.$right.find("option:selected");c.length&&b.moveToLeft(c,a)}),b.$right.on("keydown",function(a){if(8===a.keyCode||46===a.keyCode){a.preventDefault();var c=b.$right.find("option:selected");c.length&&b.moveToLeft(c,a)}}),(navigator.userAgent.match(/MSIE/i)||navigator.userAgent.indexOf("Trident/")>0||navigator.userAgent.indexOf("Edge/")>0)&&(b.$left.dblclick(function(a){b.actions.$rightSelected.trigger("click")}),b.$right.dblclick(function(a){b.actions.$leftSelected.trigger("click")})),b.actions.$rightSelected.on("click",function(c){c.preventDefault();var d=b.$left.find("option:selected");d.length&&b.moveToRight(d,c),a(this).blur()}),b.actions.$leftSelected.on("click",function(c){c.preventDefault();var d=b.$right.find("option:selected");d.length&&b.moveToLeft(d,c),a(this).blur()}),b.actions.$rightAll.on("click",function(c){c.preventDefault();var d=b.$left.children(":not(span):not(.hidden)");d.length&&b.moveToRight(d,c),a(this).blur()}),b.actions.$leftAll.on("click",function(c){c.preventDefault();var d=b.$right.children(":not(span):not(.hidden)");d.length&&b.moveToLeft(d,c),a(this).blur()}),b.actions.$undo.on("click",function(a){a.preventDefault(),b.undo(a)}),b.actions.$redo.on("click",function(a){a.preventDefault(),b.redo(a)}),b.actions.$moveUp.on("click",function(c){c.preventDefault(),b.doNotSortRight=!0;var d=b.$right.children(":selected:not(span):not(.hidden)");d.first().prev().before(d),a(this).blur()}),b.actions.$moveDown.on("click",function(c){c.preventDefault(),b.doNotSortRight=!0;var d=b.$right.children(":selected:not(span):not(.hidden)");d.last().next().after(d),a(this).blur()})},moveToRight:function(b,c,d,e){var f=this;return"function"==typeof f.callbacks.moveToRight?f.callbacks.moveToRight(f,b,c,d,e):!("function"==typeof f.callbacks.beforeMoveToRight&&!d&&!f.callbacks.beforeMoveToRight(f.$left,f.$right,b))&&(b.each(function(b,c){var d=a(c);if(f.options.ignoreDisabled&&d.is(":disabled"))return!0;if(d.parent().is("optgroup")){var e=d.parent(),g=f.$right.find('optgroup[label="'+e.prop("label")+'"]');g.length||(g=e.clone(),g.children().remove()),d=g.append(d),e.removeIfEmpty()}f.$right.move(d)}),e||(f.undoStack.push(["right",b]),f.redoStack=[]),"function"!=typeof f.callbacks.sort||d||f.doNotSortRight||f.$right.mSort(f.callbacks.sort),"function"!=typeof f.callbacks.afterMoveToRight||d||f.callbacks.afterMoveToRight(f.$left,f.$right,b),f)},moveToLeft:function(b,c,d,e){var f=this;return"function"==typeof f.callbacks.moveToLeft?f.callbacks.moveToLeft(f,b,c,d,e):!("function"==typeof f.callbacks.beforeMoveToLeft&&!d&&!f.callbacks.beforeMoveToLeft(f.$left,f.$right,b))&&(b.each(function(b,c){var d=a(c);if(d.is("optgroup")||d.parent().is("optgroup")){var e=d.is("optgroup")?d:d.parent(),g=f.$left.find('optgroup[label="'+e.prop("label")+'"]');g.length||(g=e.clone(),g.children().remove()),d=g.append(d.is("optgroup")?d.children():d),e.removeIfEmpty()}f.$left.move(d)}),e||(f.undoStack.push(["left",b]),f.redoStack=[]),"function"!=typeof f.callbacks.sort||d||f.$left.mSort(f.callbacks.sort),"function"!=typeof f.callbacks.afterMoveToLeft||d||f.callbacks.afterMoveToLeft(f.$left,f.$right,b),f)},undo:function(a){var b=this,c=b.undoStack.pop();if(c)switch(b.redoStack.push(c),c[0]){case"left":b.moveToRight(c[1],a,!1,!0);break;case"right":b.moveToLeft(c[1],a,!1,!0)}},redo:function(a){var b=this,c=b.redoStack.pop();if(c)switch(b.undoStack.push(c),c[0]){case"left":b.moveToLeft(c[1],a,!1,!0);break;case"right":b.moveToRight(c[1],a,!1,!0)}}},b}(a);a.multiselect={defaults:{startUp:function(a,b){b.find("option").each(function(b,c){var d=a.find('option[value="'+c.value+'"]'),e=d.parent();d.remove(),"OPTGROUP"==e.prop("tagName")&&e.removeIfEmpty()})},beforeMoveToRight:function(a,b,c){return!0},afterMoveToRight:function(a,b,c){},beforeMoveToLeft:function(a,b,c){return!0},afterMoveToLeft:function(a,b,c){},sort:function(a,b){return"NA"==a.innerHTML?1:"NA"==b.innerHTML?-1:a.innerHTML>b.innerHTML?1:-1}}};var c=window.navigator.userAgent,d=c.indexOf("MSIE ")+c.indexOf("Trident/")+c.indexOf("Edge/")>-3;a.fn.multiselect=function(c){return this.each(function(){var d=a(this),e=d.data("crlcu.multiselect"),f=a.extend({},a.multiselect.defaults,d.data(),"object"==typeof c&&c);e||d.data("crlcu.multiselect",e=new b(d,f))})},a.fn.move=function(a){return this.append(a).find("option").prop("selected",!1),this},a.fn.removeIfEmpty=function(){return this.children().length||this.remove(),this},a.fn.mShow=function(){return this.removeClass("hidden").show(),d&&this.each(function(b,c){a(c).parent().is("span")&&a(c).parent().replaceWith(c),a(c).show()}),this},a.fn.mHide=function(){return this.addClass("hidden").hide(),d&&this.each(function(b,c){a(c).parent().is("span")||a(c).wrap("<span>").hide()}),this},a.fn.mSort=function(a){return this.find("option").sort(a).appendTo(this),this},a.expr[":"].search=function(b,c,d){return a(b).text().toUpperCase().indexOf(d[3].toUpperCase())>=0}});
